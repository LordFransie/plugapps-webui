{% extends 'system/systemtemplate.html' %}

{% block configpage %}
<script type="text/javascript">
function checkUpdates() {
$.ajax({
        method: 'GET',
        cache: false,
        url : '/api/checkforapps',
        dataType : 'html',
        success: function (html) { $('#os').html(html); }
});
$.ajax({
        method: 'GET',
        cache: false,
        url : '/api/hasupgrades',
        dataType : 'text',
        success: function (text) { 
            if (text == "False") {
            }
            else {
                $('#upgradebuttons').show();
            }
        }
});
}

checkUpdates();
</script>
<div id="configpage">
<h2>Software</h2>
<p><span id="os"><img alt="checking" src="/static/images/bar.gif"/></span></p>

<div id="upgradebuttons">
<span class="button">
<input type="button"
       value="Upgrade"
       style="color: #333;
       padding: 5px;
       font-family: Georgia, ..., serif;
       font-size: 18px;
       letter-spacing: 2px;"
       onclick="
       ajaxSwap('#buttonarea');$('#pagetitle').html('Please Wait');
       $.ajax({
        method: 'GET',
        cache: false,
        url : '/system/update',
        dataType : 'html',
        success: function (html) { $('#os').html(html);}
        });
        $('#upgradebuttons').hide();
"/>
</span>

<span class="button">
<input type="button"
       value="Cancel"
       style="color: #333;
       padding: 5px;
       font-family: Georgia, ..., serif;
       font-size: 18px;
       letter-spacing: 2px;"
       onClick="location.href='/';"/>
</span>
</div><!-- upgradebuttons -->
</div><!-- configpage -->
{% endblock %}
